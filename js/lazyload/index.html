<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>懒加载图片</title>
    <script src="lazyload.js"></script>
</head>
<body>
    <!-- 网页在渲染的时候，http的请求数量
    Chrome性能最好，同时并发的请求数十几个
    将图片下载放到dom ready之后，将有效提升网页的打开速度
    占位图片
    优化前：n张图片 url 不一样 http请求数量是 n
    优化后：图片上的http只有1
    如果url一样，不会重复发送 -->
    <img class="pic1" src="http://static.youku.com/yk/vmanage/img/manage/video/mask.d53611efc6.png" 
    origin_src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1525426886872&di=a05276a748706144f3efb9afd52051dd&imgtype=0&src=http%3A%2F%2Fimg5.duitang.com%2Fuploads%2Fitem%2F201510%2F01%2F20151001093712_WwyRB.jpeg" alt="">
    <img src="http://static.youku.com/yk/vmanage/img/manage/video/mask.d53611efc6.png" 
    origin_src="http://i3.hoopchina.com.cn/blogfile/201605/14/BbsImg146321634829688_1023x1381.jpg" alt="">
    <script>
        // 用户一经看到网页了，dom ready
        // 优化图片下载，将其推后
        window.onload=function(){
            // 懒加载图片
            const img=document.querySelector(".pic1");
            LazyLoadImage.setSrc(img);
            // 在页面打开后，重新下载图片
            // const img=document.querySelector(".pic1");
            // // origin_src 自定义的属性
            // const url=img.getAttribute("origin_src");
            // console.log(url);
            // // img.src=url;
            // // img.setAttribute("src",url);
            // // 图片不要直接url 设置过去
            // const oImg=document.createElement("img");
            // oImg.style.display="none";
            // document.body.appendChild(oImg);
            // oImg.onload=function(){
            //     // 幕后工作者 已经下载了图片
            //     // url一旦下载，在浏览器缓存（静态）文件
            //     img.src=url;
            // };
            // // 图片的下载是异步的，图片有大小
            // oImg.src=url;
        };
    </script>
</body>
</html>